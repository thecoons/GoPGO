$ just pgo-workflow
go build -o gopgo
ğŸš€ Starting server in background...
Starting server on port 8080...
ğŸ§  Starting CPU profile collection in background...
ğŸ”„ Generating load while profiling...
goos: linux
goarch: amd64
pkg: gocoon.dev/goPGO
cpu: 13th Gen Intel(R) Core(TM) i5-1340P
BenchmarkStatusEndpointLive-16                     48064             96962 ns/op
BenchmarkComputeEndpointLive1000-16                15934            300476 ns/op
BenchmarkComputeEndpointLive10000-16               16357            303530 ns/op
BenchmarkComputeEndpointLive100000-16              15446            306030 ns/op
BenchmarkColdPathLive-16                           44419            103644 ns/op
PASS
ok      gocoon.dev/goPGO        35.061s
â³ Waiting for profiling to complete...
ğŸ›‘ Stopping server...
âœ… PGO workflow complete. Run benchmarks to compare performance.

$ just benchmark-compare
ğŸ”¨ Building without PGO...
go build -o gopgo
ğŸš€ Starting server in background for before benchmarks...
Starting server on port 8080...
ğŸ” Running live benchmarks before PGO...
ğŸ›‘ Stopping server...
ğŸ”¨ Building with PGO...
go build -pgo=cpu.pprof -o gopgo
ğŸš€ Starting server with PGO in background for after benchmarks...
Starting server on port 8080...
ğŸ” Running live benchmarks after PGO...
ğŸ›‘ Stopping server...
ğŸ“Š Benchmark comparison:
goos: linux
goarch: amd64
pkg: gocoon.dev/goPGO
cpu: 13th Gen Intel(R) Core(TM) i5-1340P
                             â”‚ benchmark-before.txt â”‚        benchmark-after.txt         â”‚
                             â”‚        sec/op        â”‚   sec/op     vs base               â”‚
StatusEndpointLive-16                   98.73Âµ Â± 3%   94.12Âµ Â± 4%   -4.68% (p=0.002 n=6)
ComputeEndpointLive1000-16              296.3Âµ Â± 2%   375.5Âµ Â± 3%  +26.70% (p=0.002 n=6)
ComputeEndpointLive10000-16             298.7Âµ Â± 5%   384.4Âµ Â± 1%  +28.66% (p=0.002 n=6)
ComputeEndpointLive100000-16            298.6Âµ Â± 3%   376.3Âµ Â± 4%  +26.03% (p=0.002 n=6)
ColdPathLive-16                         109.7Âµ Â± 4%   110.7Âµ Â± 5%        ~ (p=0.699 n=6)
geomean                                 195.6Âµ        224.1Âµ       +14.59%

                             â”‚ benchmark-before.txt â”‚        benchmark-after.txt         â”‚
                             â”‚         B/op         â”‚     B/op      vs base              â”‚
StatusEndpointLive-16                  4.405Ki Â± 0%   4.405Ki Â± 0%       ~ (p=0.859 n=6)
ComputeEndpointLive1000-16             4.424Ki Â± 0%   4.426Ki Â± 0%       ~ (p=0.331 n=6)
ComputeEndpointLive10000-16            4.431Ki Â± 0%   4.429Ki Â± 0%       ~ (p=0.615 n=6)
ComputeEndpointLive100000-16           4.436Ki Â± 0%   4.438Ki Â± 0%       ~ (p=0.998 n=6)
ColdPathLive-16                        4.471Ki Â± 0%   4.468Ki Â± 0%       ~ (p=0.372 n=6)
geomean                                4.433Ki        4.433Ki       +0.00%

                             â”‚ benchmark-before.txt â”‚        benchmark-after.txt         â”‚
                             â”‚      allocs/op       â”‚ allocs/op   vs base                â”‚
StatusEndpointLive-16                    57.00 Â± 0%   57.00 Â± 0%       ~ (p=1.000 n=6) Â¹
ComputeEndpointLive1000-16               57.00 Â± 0%   57.00 Â± 0%       ~ (p=1.000 n=6) Â¹
ComputeEndpointLive10000-16              57.00 Â± 0%   57.00 Â± 0%       ~ (p=1.000 n=6) Â¹
ComputeEndpointLive100000-16             57.00 Â± 0%   57.00 Â± 0%       ~ (p=1.000 n=6) Â¹
ColdPathLive-16                          57.00 Â± 0%   57.00 Â± 0%       ~ (p=1.000 n=6) Â¹
geomean                                  57.00        57.00       +0.00%
Â¹ all samples are equal
